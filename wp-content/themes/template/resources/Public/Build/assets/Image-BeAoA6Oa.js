import{j as v,b as n,o as j,n as h,t as w,p as c,q as l,F as $,u as x,v as b}from"./@vue-B3Iarfus.js";const _={key:0,class:"picture"},B=["media","srcset"],S=["media","srcset"],A=["srcset"],C=["srcset"],L=["data-srcset","width","height","alt"],N="/wp-json/jdev/get-image/",k={__name:"Image",props:{image:{type:[Object,Boolean],required:!0,default:!1},alt:{type:String},width:{type:Number},height:{type:Number},imgClass:{type:String},media:{type:Object,default:()=>({})}},setup(i){const y=v("lazyLoad"),e=i,r=n(()=>`${N}${e.image.filename}/?id=${e.image.id}`),d=n(()=>{const a=[];return e.width&&a.push(`w=${e.width}`),e.height&&a.push(`h=${e.height}`),a.join("&")}),o=n(()=>{const a=[];let s=e.width?e.width*2:null,t=e.height?e.height*2:null;return s&&s>2560&&(t=e.height?Math.round(2560/e.width*e.height):null,s=2560),s&&a.push(`w=${s}`),t&&a.push(`h=${t}`),a.join("&")}),f=n(()=>`${r.value}&${d.value}&webp=true 1x, ${r.value}&${o.value}&webp=true 2x`),m=n(()=>`${r.value}&${d.value} 1x, ${r.value}&${o.value} 2x`),g=n(()=>!e.media||typeof e.media!="object"?null:Object.keys(e.media).reduce((a,s)=>{const t=e.media[s];return t?.width&&t?.height&&(a[s]=t),a},{})),p=(a,s,t)=>{const u=[`w=${a}`,`h=${s}`];return t&&u.push("webp=true"),`${r.value}&${u.join("&")} 1x, ${r.value}&w=${a*2}&h=${s*2}&${t?"webp=true":""} 2x`};return j(()=>{y?.update()}),(a,s)=>i.image&&!Array.isArray(i.image)?(c(),h("picture",_,[g.value?(c(!0),h($,{key:0},x(g.value,(t,u)=>(c(),h($,{key:u},[l("source",{media:`(max-width: ${u}px)`,srcset:p(t.width,t.height,!0),type:"image/webp"},null,8,B),l("source",{media:`(max-width: ${u}px)`,srcset:p(t.width,t.height,!1),type:"image/jpeg"},null,8,S)],64))),128)):w("",!0),l("source",{srcset:f.value,type:"image/webp"},null,8,A),l("source",{srcset:m.value,type:"image/jpeg"},null,8,C),l("img",{class:b(i.imgClass),lazy:"","data-srcset":m.value,width:i.width,height:i.height,alt:i.alt},null,10,L)])):w("",!0)}};export{k as default};
